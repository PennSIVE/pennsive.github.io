<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.319">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>PennSIVE Wiki – rpackages</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">PennSIVE Wiki</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Welcome</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
    <div class="dropdown">
      <a href="" title="" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label=""><i class="bi bi-github"></i></a>
      <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item quarto-navbar-tools ms-auto-item" href="https://github.com/pennsive/pennsive.github.io">
            Source Code
            </a>
          </li>
          <li>
            <a class="dropdown-item quarto-navbar-tools ms-auto-item" href="https://github.com/PennSIVE/pennsive.github.io/issues/new">
            Report a Bug
            </a>
          </li>
      </ul>
    </div>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./rpackages.html">R Packages</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./environments.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Environment setup</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./projects.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Project setup</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./heudiconv.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dicom Conversion</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./flywheel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Flywheel</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pipelines.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PennSIVE pipelines</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reproducibility.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Reproducibility</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./workflows.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Nipype workflows</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cluster_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Cluster Computing</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./bash_startup.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PennSIVE Bash Startup Scripts</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cluster_rstudio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Using RStudio/Jupyter Lab on the Cluster</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./gpu-computing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">GPU Computing</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rpackages.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">R Packages</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./python.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Intro to Python</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./contributing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Contributing to this Wiki</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#r-packages" id="toc-r-packages" class="nav-link active" data-scroll-target="#r-packages">R Packages</a>
  <ul class="collapse">
  <li><a href="#making-r-packages" id="toc-making-r-packages" class="nav-link" data-scroll-target="#making-r-packages">Making R Packages</a></li>
  <li><a href="#tldr-you-can-make-an-r-package-with-3-lines-of-code" id="toc-tldr-you-can-make-an-r-package-with-3-lines-of-code" class="nav-link" data-scroll-target="#tldr-you-can-make-an-r-package-with-3-lines-of-code">TLDR; You Can Make an R Package with 3 Lines of Code</a></li>
  <li><a href="#example-pennsive_stuff" id="toc-example-pennsive_stuff" class="nav-link" data-scroll-target="#example-pennsive_stuff">Example: <code>pennsive_stuff</code></a>
  <ul class="collapse">
  <li><a href="#install-r-packages-to-help-you-make-packages" id="toc-install-r-packages-to-help-you-make-packages" class="nav-link" data-scroll-target="#install-r-packages-to-help-you-make-packages">1. Install R packages to help you make packages</a></li>
  <li><a href="#a.-optional-check-that-your-package-name-is-valid" id="toc-a.-optional-check-that-your-package-name-is-valid" class="nav-link" data-scroll-target="#a.-optional-check-that-your-package-name-is-valid">1a. (Optional) Check that your package name is valid</a></li>
  <li><a href="#create-package-directory" id="toc-create-package-directory" class="nav-link" data-scroll-target="#create-package-directory">2. Create Package Directory</a></li>
  <li><a href="#add-functions-to-the-r-folder" id="toc-add-functions-to-the-r-folder" class="nav-link" data-scroll-target="#add-functions-to-the-r-folder">3. Add Functions to the R Folder</a></li>
  <li><a href="#write-documentation-for-functions" id="toc-write-documentation-for-functions" class="nav-link" data-scroll-target="#write-documentation-for-functions">4. Write Documentation for Functions</a></li>
  <li><a href="#install-package" id="toc-install-package" class="nav-link" data-scroll-target="#install-package">5. Install Package</a></li>
  </ul></li>
  <li><a href="#extras" id="toc-extras" class="nav-link" data-scroll-target="#extras">Extras</a></li>
  <li><a href="#extras-1-including-data" id="toc-extras-1-including-data" class="nav-link" data-scroll-target="#extras-1-including-data">Extras 1: Including Data</a></li>
  <li><a href="#extras-2-version-control" id="toc-extras-2-version-control" class="nav-link" data-scroll-target="#extras-2-version-control">Extras 2: Version Control</a></li>
  <li><a href="#extras-3-uploading-to-cranbioconductor" id="toc-extras-3-uploading-to-cranbioconductor" class="nav-link" data-scroll-target="#extras-3-uploading-to-cranbioconductor">Extras 3: Uploading to CRAN/Bioconductor</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">



<section id="r-packages" class="level1">
<h1>R Packages</h1>
<section id="making-r-packages" class="level2">
<h2 class="anchored" data-anchor-id="making-r-packages">Making R Packages</h2>
<p>When writing a methodological paper, it is a good idea to make your code publicly available, since it will be much easier for others to use your method on their own data. One way to do this is to create an R package.</p>
<p>R packages can be complicated, but the easiest way to get started is to make a <strong>bare-bones, minimal R package</strong> and then add complexity. This article will show you how!</p>
<p><strong>Note</strong>: These instructions are blatantly stolen from <a href="https://hilaryparker.com/2014/04/29/writing-an-r-package-from-scratch/">Hilary Parker’s article</a>, <a href="https://kbroman.org/pkg_primer/">Karl Broman’s article</a>, <a href="https://andy1764.github.io/Making%20an%20R%20Package/Making-an-R-Package.html">Andrew’s slides</a>, and Danni’s teaching materials from BSTA 670. Everything was tested on R version 4.1.3.</p>
</section>
<section id="tldr-you-can-make-an-r-package-with-3-lines-of-code" class="level2">
<h2 class="anchored" data-anchor-id="tldr-you-can-make-an-r-package-with-3-lines-of-code">TLDR; You Can Make an R Package with 3 Lines of Code</h2>
<ul>
<li><code>devtools::create()</code></li>
<li><code>devtools::document()</code></li>
<li><code>devtools::install()</code></li>
</ul>
</section>
<section id="example-pennsive_stuff" class="level2">
<h2 class="anchored" data-anchor-id="example-pennsive_stuff">Example: <code>pennsive_stuff</code></h2>
<p>Our goal is to make a minimal package called <code>pennsive_stuff</code>, consisting of 2 R functions. Suppose these functions are located in two <code>.R</code> files, <code>nl.R</code> and <code>plot_dist.R</code>, containing the following:</p>
<ul>
<li><code>nl()</code>: a function that prints new lines in R Markdown documents.</li>
</ul>
<pre><code># Contents of nl.R
nl &lt;- function(){
  cat("  \n")
  cat("  \n")
}</code></pre>
<ul>
<li><code>plot_dist()</code>: a function that plots the distribution of a variable in a dataset.</li>
</ul>
<pre><code># Contents of plot_dist.R
plot_dist &lt;- function(dat, var_name){
  stopifnot(var_name %in% colnames(dat))
  stopifnot(class(dat[,var_name]) == "numeric")
  
  p &lt;- ggplot2::ggplot(dat) +
    ggplot2::geom_histogram(ggplot2::aes_string(x = var_name), bins = 30, 
                            fill = wesanderson::wes_palettes$GrandBudapest2[1]) +
    ggplot2::theme_minimal() +
    ggplot2::labs(y = "Count", x = var_name)
  
  return(p)
}</code></pre>
<p>Note that <code>plot_dist()</code> contains dependencies from the <code>ggplot</code> and <code>wesanderson</code> packages.</p>
<section id="install-r-packages-to-help-you-make-packages" class="level3">
<h3 class="anchored" data-anchor-id="install-r-packages-to-help-you-make-packages">1. Install R packages to help you make packages</h3>
<pre><code># Run in R
install.packages(c("available", "usethis", "testthat", "pkgdown", "roxygen2", "devtools", "covr"))</code></pre>
<p>(But how were <em>those</em> packages created?? Ooooo!)</p>
<p>To make a super minimal package, you really only need <code>roxygen2</code> and <code>devtools</code>.</p>
</section>
<section id="a.-optional-check-that-your-package-name-is-valid" class="level3">
<h3 class="anchored" data-anchor-id="a.-optional-check-that-your-package-name-is-valid">1a. (Optional) Check that your package name is valid</h3>
<p>This will also check if the name has been taken on CRAN and other sites.</p>
<pre><code># Run in R
# Will look up your package name on CRAN, Bioconductor, and Github
# Will also check the meaning of your package name on several websites
available::available(name = "pennsive_stuff", browse = FALSE)</code></pre>
</section>
<section id="create-package-directory" class="level3">
<h3 class="anchored" data-anchor-id="create-package-directory">2. Create Package Directory</h3>
<pre><code># Run in R
dir.package &lt;- [the directory on your computer that you'd like everything to be in]
setwd(dir.package)
devtools::create("pennsive_stuff")</code></pre>
<p>This will automatically create a folder in your working directory called <code>pennsive_stuff</code>:</p>
<pre><code># Run in R
list.files("pennsive_stuff")</code></pre>
<ul>
<li><code>DESCRIPTION</code> has details about your package, which can be edited in an app like TextEdit (Mac) or WordPad (Windows).</li>
<li><code>NAMESPACE</code> has the names of the objects in your package that will be made available upon <code>library()</code>ing it. It’s empty right now!</li>
<li><code>R</code> is a folder that will hold all of your function <code>.R</code> files.</li>
</ul>
</section>
<section id="add-functions-to-the-r-folder" class="level3">
<h3 class="anchored" data-anchor-id="add-functions-to-the-r-folder">3. Add Functions to the R Folder</h3>
<p>Each function that you want to include in the package should be in an <code>.R</code> file and placed in the folder <code>pennsive_stuff/R</code> that was created in Step 2. You can have one function per <code>.R</code> file, or organize multiple functions in one <code>.R</code> file. It doesn’t mattter!</p>
<p>Let’s put the <code>.R</code> files, <code>nl.R</code> and <code>plot_dist.R</code>–which contain the code for <code>nl()</code> and <code>plot_dist()</code> respectively–into <code>pennsive_stuff/R</code>:</p>
<pre><code># Run in R. 
# Ensure that the two files, nl.R and plot_dist.R are in pennsive_stuff/R
list.files(file.path("pennsive_stuff", "R"))</code></pre>
</section>
<section id="write-documentation-for-functions" class="level3">
<h3 class="anchored" data-anchor-id="write-documentation-for-functions">4. Write Documentation for Functions</h3>
<p>You know the nice notes that you see when you do e.g.&nbsp;<code>?sample</code>? We too can have nice things!</p>
<p>The most tedious parts of documentation are taken care of through the <code>Roxygen2</code> package. All you have to do is add special comments at the start of the <code>.R</code> files that you just copied to <code>/pennsive_stuff/R</code>.</p>
<p>Roxygen2 documentation is just extra lines added before the functions in the <code>.R</code> files and they look roughly like this:</p>
<pre><code>#' Short summary of the function
#'
#' Description of the function
#'
#' @param param_name1 description of parameter/input 1
#' @param param_name1 description of parameter/input 1
#'
#' @return description of what is returned
#'
#' @examples
#' nl()
#'
#' @export</code></pre>
<ul>
<li>The final line <code>@export</code> adds this function to the NAMESPACE file, so that is accessible (i.e., via <code>pennsive_stuff::nl()</code> or after calling library). Otherwise, you would have to access it through the <code>:::</code> operator, à la <code>pennsive_stuff:::nl()</code>.</li>
<li>There are many options for formatting these things (e.g., adding links, equations): see <a href="https://roxygen2.r-lib.org/articles/formatting.html">https://roxygen2.r-lib.org/articles/formatting.html</a>.</li>
</ul>
<p>For example, after adding documentation to <code>nl.R</code>, the file would look like:</p>
<pre><code># Contents of nl.R

#' Print new line in HTML files
#'
#' This function prints a new line in HTML files, which is useful when printing other things such as headers or plots.
#'
#' @return Returns nothing except some spaces!!
#'
#' @examples
#' nl()
#'
#' @export

nl &lt;- function(){
  cat("  \n")
  cat("  \n")
}</code></pre>
<p>For <code>plot_dist.R</code>, because the function depends on the <code>ggplot2</code> and <code>wesanderson</code> R packages, we would have an additional line for <code>@import</code> (imports everything in the namespace) and <code>@importFrom</code> (imports only a particular thing).</p>
<pre><code># Contents of plot_dist.R

#' Plot Histogram
#'
#' Plot the histogram of a numeric variable within a data frame
#'
#' @param dat a data.frame containing the data to plot.
#' @param var_name a character vector of the column name in the data.
#'
#' @return a histogram plot.
#' @import ggplot2
#' @importFrom wesanderson wes_palettes
#'
#' @examples
#' plot_dist(dat = iris, var_name = "Petal.Length")
#'
#' @export

plot_dist &lt;- function(dat, var_name){
  stopifnot(var_name %in% colnames(dat))
  stopifnot(class(dat[,var_name]) == "numeric")
  
  p &lt;- ggplot2::ggplot(dat) +
    ggplot2::geom_histogram(ggplot2::aes_string(x = var_name), bins = 30, 
                            fill = wesanderson::wes_palettes$GrandBudapest2[1]) +
    ggplot2::theme_minimal() +
    ggplot2::labs(y = "Count", x = var_name)
  
  return(p)
}</code></pre>
<section id="a.-process-documentation" class="level4">
<h4 class="anchored" data-anchor-id="a.-process-documentation">4a. Process Documentation</h4>
<pre><code># Run in R
setwd(file.path(dir.package, "pennsive_stuff"))
devtools::document()</code></pre>
<p>After running <code>document()</code>, you will see some <code>.Rd</code> files automatically generated for you in the <code>man</code> folder:</p>
<pre><code># Run in R
list.files("man")</code></pre>
</section>
</section>
<section id="install-package" class="level3">
<h3 class="anchored" data-anchor-id="install-package">5. Install Package</h3>
<p>That was it! Easy, right? Now let’s install the package while in the directory containing the <code>pennsive_stuff</code> folder:</p>
<pre><code># Run in R
setwd(dir.package)
devtools::install("pennsive_stuff")</code></pre>
<p>Now you have the package!! You can call the <code>library</code> command from anywhere (on your computer) now.</p>
<pre><code># Run in R
library(pennsive_stuff)
nl()
plot_dist(dat = iris, var_name = "Petal.Length")</code></pre>
<p>And you can see the results of the <code>Roxygen2</code> documentation here:</p>
<pre><code># Run in R
?nl()
?plot_dist()</code></pre>
<p>Great job!</p>
</section>
</section>
<section id="extras" class="level2">
<h2 class="anchored" data-anchor-id="extras">Extras</h2>
<p>You have a basic R package; everything else is gravy. Here are some more things you can do with your package:</p>
<ul>
<li>Include data.</li>
<li>Upload to Github, which allows your package to be installed via <code>devtools::install_github()</code>.</li>
<li>Uplaod to CRAN or Bioconductor.</li>
</ul>
</section>
<section id="extras-1-including-data" class="level2">
<h2 class="anchored" data-anchor-id="extras-1-including-data">Extras 1: Including Data</h2>
<p>Some packages come with data (e.g.&nbsp;<code>refund::DTI</code>) that accompany the functions. Suppose we also want the package to contain the dataset <code>iris2</code>.</p>
<p>In the package directory, create a folder called <code>data</code>:</p>
<pre><code># Run in R
if (!dir.exists(file.path(dir.package, "pennsive_stuff/data"))) dir.create(file.path(dir.package, "pennsive_stuff/data"))</code></pre>
<p>The easiest way to save the data in the <code>data</code> folder is to use <code>usethis::usedata()</code>:</p>
<pre><code># Run in R
set.seed(382349)
iris2 = iris[sample(x = 1:nrow(iris), size = 100, replace = TRUE),]

setwd(file.path(dir.package, "pennsive_stuff"))
usethis::use_data(iris2, iris2)</code></pre>
<p>Then, you’ll need to create an R file named <code>data.R</code> in the <code>R</code> folder, where your other R functions are stored.</p>
<p>Similar to the <code>Roxygen2</code> documentation for functions, the <code>data.R</code> file needs to contain the following:</p>
<pre><code># Contents of data.R

#' Edgar Anderson's Iris Data
#'
#' This famous (Fisher's or Anderson's) iris data set gives the measurements in 
#' centimeters of the variables sepal length and width and petal length and width, 
#' respectively, for 50 flowers from each of 3 species of iris. The species are 
#' Iris setosa, versicolor, and virginica.
#'
#' @docType data
#'
#' @usage data(iris2)
#'
#' @format \code{"iris"} is a data frame with 150 cases (rows) and 5 variables
#'  (columns) named Sepal.Length, Sepal.Width, Petal.Length, Petal.Width, and Species.
#'
#' @keywords datasets
#'
#' @references Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988) 
#' The New S Language. Wadsworth &amp; Brooks/Cole. 

#'
#' @source \href{https://phenome.jax.org/projects/Moore1b}{QTL Archive}
#'
#' @examples
#' data(iris2)
#' plot_dist(dat = iris2, var_name = "Petal.Width")
"iris2"</code></pre>
<p>Now you can re-document and re-install the package and get the <code>iris2</code> data using <code>data(iris2)</code>!</p>
<pre><code># Run in R

devtools::document()

setwd(file.path(dir.package))
devtools::install("pennsive_stuff")
library(pennsive_stuff)

data(iris2)
plot_dist(dat = iris2, var_name = "Sepal.Length")
?iris2</code></pre>
</section>
<section id="extras-2-version-control" class="level2">
<h2 class="anchored" data-anchor-id="extras-2-version-control">Extras 2: Version Control</h2>
<p>Keep track of the versions of your package using Git. Once you set up a Git repo in your local drive, it’s easy to share it on Github (as easy as anything with Git/Github, anyways…)</p>
<section id="e2.1.-create-git-repo-in-package-folder" class="level4">
<h4 class="anchored" data-anchor-id="e2.1.-create-git-repo-in-package-folder">E2.1. Create git repo in package folder</h4>
<p>First, <code>cd</code> to the package folder <code>/pennsive_stuff/</code> in your Terminal and type</p>
<pre><code># Run in terminal
git init
git add .
git commit</code></pre>
<p>If you are using RStudio and have opened the project <code>pennsive_stuff.Rproj</code>, you should see a “Git” tab in the Environment, History, Connections tab.</p>
</section>
<section id="e2.2.-create-repo-on-github" class="level4">
<h4 class="anchored" data-anchor-id="e2.2.-create-repo-on-github">E2.2. Create repo on Github</h4>
<p>Next, go to Github and make a new repo with the name as this package, <code>pennsive_stuff</code>. Leave the box for README unchecked!</p>
<p>You may need to configure RStudio access to your Github account via a personal access token. Easy instructions here: <a href="https://gist.github.com/Z3tt/3dab3535007acf108391649766409421">https://gist.github.com/Z3tt/3dab3535007acf108391649766409421</a>.</p>
</section>
<section id="e2.3.-connect-repo-in-package-folder-to-github" class="level4">
<h4 class="anchored" data-anchor-id="e2.3.-connect-repo-in-package-folder-to-github">E2.3. Connect repo in package folder to github</h4>
<p>In terminal,</p>
<pre class="{r}"><code># Run in terminal
git remote add origin https://github.com/[your github-id]/pennsive_stuff
git push origin HEAD:main</code></pre>
<p>For more details, see <a href="https://andy1764.github.io/Making%20an%20R%20Package/Making-an-R-Package.html#47">https://andy1764.github.io/Making%20an%20R%20Package/Making-an-R-Package.html#47</a> and <a href="https://kbroman.org/pkg_primer/pages/github.html">https://kbroman.org/pkg_primer/pages/github.html</a>.</p>
</section>
</section>
<section id="extras-3-uploading-to-cranbioconductor" class="level2">
<h2 class="anchored" data-anchor-id="extras-3-uploading-to-cranbioconductor">Extras 3: Uploading to CRAN/Bioconductor</h2>
<p>There are many hoops to jump through to put your package on CRAN. CRAN is maintained by volunteers, who manually check your R package (especially if it’s the first submission) in addition to all of the automated checks. <a href="https://kbroman.org/pkg_primer/pages/cran.html">https://kbroman.org/pkg_primer/pages/cran.html</a>.</p>
<p>You can also put your package on Bioconductor, which is reportedly easier: <a href="https://bioconductor.org/developers/package-submission/">https://bioconductor.org/developers/package-submission/</a>.</p>
<!--To view the wiki, cd to pennsive.github.io and run: bash run.sh -->


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>